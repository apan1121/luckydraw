(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{101:function(t,i,e){"use strict";(function(t){var n=e(145),r=e.n(n),s=e(0),a=e(2);function o(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?o(Object(e),!0).forEach((function(i){c(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function c(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}i.a={components:{draggable:r.a},filters:{},props:{},data:function(){return{addNewFlag:!1,newPrize:{title:"",amount:1},inputPrizeList:[],editPrizeInfo:null}},computed:l({},Object(a.c)(["triggerOpenPrizeList","prizeList"])),watch:{triggerOpenPrizeList:{handler:function(){this.triggerOpenPrizeList?t(this.$refs.box).modal("show"):t(this.$refs.box).modal("hide")}},inputPrizeList:{deep:!0,handler:function(){var t=JSON.stringify(this.prizeList),i=JSON.stringify(this.inputPrizeList);t!==i&&this.syncPrizeList(JSON.parse(i))}}},created:function(){},mounted:function(){var i=this;t(this.$refs.box).bind("shown.bs.modal",(function(){i.inputPrizeList=JSON.parse(JSON.stringify(i.prizeList)),i.addNewFlag=!1,i.newPrize={title:"",amount:1},0===i.inputPrizeList.length&&(i.addNewFlag=!0),i.editPrizeInfo=null,s.g.mixpanel("PrizeListOpen_click"),s.g.gtag("event","PrizeListOpen_click")})),t(i.$refs.box).bind("hidden.bs.modal",(function(){s.g.mixpanel("PrizeListClose_click"),s.g.gtag("event","PrizeListClose_click")})),this.triggerOpenPrizeList?t(this.$refs.box).modal("show"):t(this.$refs.box).modal("hide")},updated:function(){},destroyed:function(){},methods:l(l(l({},Object(a.b)({})),Object(a.d)({syncPrizeList:"syncPrizeList"})),{},{openAddPrize:function(){this.newPrize={title:"",amount:1},this.addNewFlag=!0},saveNewPrizeAct:function(){if(this.newPrize.title)if(JSON.parse(JSON.stringify(this.inputPrizeList)).map((function(t){return t.title})).includes(this.newPrize.title))s.e.warning({html:"已有相同的獎項"});else{var t=l({prize_sn:s.f.getRandomString(10),title:"獎勵",amount:1,del:!1},this.newPrize);this.inputPrizeList.push(t),this.addNewFlag=!1,s.g.mixpanel("PrizeListAdd_click",t),s.g.gtag("event","PrizeListAdd_click",t)}else this.addNewFlag=!1},openEditPrize:function(t){this.editPrizeInfo=JSON.parse(JSON.stringify(t))},saveEditPrizeAct:function(){if(this.editPrizeInfo){var t=JSON.parse(JSON.stringify(this.editPrizeInfo)),i=JSON.parse(JSON.stringify(this.inputPrizeList)),e=!1;if(i.forEach((function(i){i.prize_sn!==t.prize_sn&&i.title===t.title&&(e=!0)})),e)s.e.warning({html:"已有相同的獎項"});else{var n=!1;i.forEach((function(i,e){i.prize_sn===t.prize_sn&&(n=e)})),!1===n?(i.del=!1,i.push(t)):i[n]=t,this.inputPrizeList=i,s.g.mixpanel("PrizeListEditSave_click",t),s.g.gtag("event","PrizeListEditSave_click",t),this.editPrizeInfo=null}}},delPrizeAct:function(t){var i=this;s.e.warning({html:"您確定要刪除此筆獎項嗎？對應的得獎資訊也都會消除唷"},(function(){var e=JSON.parse(JSON.stringify(i.inputPrizeList)),n=!1;e.forEach((function(i,e){i.prize_sn===t.prize_sn&&(n=e)})),!1!==n&&(e[n].del=!0,s.g.mixpanel("PrizeListEditDel_click",e[n]),s.g.gtag("event","PrizeListEditDel_click",e[n])),i.inputPrizeList=e}))},sortCallback:function(){var t=JSON.parse(JSON.stringify(this.inputPrizeList));s.g.mixpanel("PrizeListSort_trigger",t),s.g.gtag("event","PrizeListSort_trigger",t)}})}}).call(this,e(14))},357:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"box",staticClass:"modal",attrs:{id:"PrizeListBox",tabindex:"-1",role:"dialog"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("draggable",{attrs:{handle:".handler"},on:{change:t.sortCallback},model:{value:t.inputPrizeList,callback:function(i){t.inputPrizeList=i},expression:"inputPrizeList"}},[e("transition-group",[t._l(t.inputPrizeList,(function(i){return[!1===i.del?[t.editPrizeInfo&&t.editPrizeInfo.prize_sn===i.prize_sn?e("div",{key:i.prize_sn,staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend handler cursor-pointer"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("i",{staticClass:"fas fa-bars"})])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPrizeInfo.title,expression:"editPrizeInfo.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"編輯獎項名稱"},domProps:{value:t.editPrizeInfo.title},on:{input:function(i){i.target.composing||t.$set(t.editPrizeInfo,"title",i.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editPrizeInfo.amount,expression:"editPrizeInfo.amount",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"數量",min:"1",step:"1"},domProps:{value:t.editPrizeInfo.amount},on:{input:function(i){i.target.composing||t.$set(t.editPrizeInfo,"amount",t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text btn-success",staticStyle:{cursor:"pointer"},on:{click:t.saveEditPrizeAct}},[e("i",{staticClass:"far fa-save"})])])]):e("div",{key:i.prize_sn,staticClass:"input-group mb-3 prizeListGroup"},[e("div",{staticClass:"input-group-prepend handler cursor-pointer"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("i",{staticClass:"fas fa-bars"})])]),t._v(" "),e("div",{staticClass:"form-control"},[t._v("\n                                        "+t._s(i.title)+" ("+t._s(i.amount)+")\n                                    ")]),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openEditPrize(i)}}},[e("i",{staticClass:"far fa-edit"})])]),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delPrizeAct(i)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])]:t._e()]}))],2)],1),t._v(" "),t.prizeList.length>0?[e("hr")]:t._e(),t._v(" "),t.addNewFlag?[e("div",{staticClass:"input-group mb-3",attrs:{id:"AddPrizeGroup"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrize.title,expression:"newPrize.title"}],staticClass:"form-control",attrs:{name:"title",type:"text",placeholder:"新增的獎項名稱"},domProps:{value:t.newPrize.title},on:{input:function(i){i.target.composing||t.$set(t.newPrize,"title",i.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newPrize.amount,expression:"newPrize.amount",modifiers:{number:!0}}],staticClass:"form-control",attrs:{name:"amount",type:"number",placeholder:"數量",min:"1",step:"1"},domProps:{value:t.newPrize.amount},on:{input:function(i){i.target.composing||t.$set(t.newPrize,"amount",t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:t.saveNewPrizeAct}},[e("i",{staticClass:"far fa-save"})])])])]:[e("button",{staticClass:"btn btn-info btn-block",attrs:{id:"AddPrize",type:"button"},on:{click:function(i){return t.openAddPrize(!0)}}},[t._v("\n                        新增獎項\n                    ")])]],2)])])])};n._withStripped=!0;var r=e(101).a,s=e(9),a=Object(s.a)(r,n,[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title"},[i("i",{staticClass:"fas fa-award"}),this._v("\n                    獎項名單\n                ")]),this._v(" "),i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,"29933d22",null);a.options.__file="components/PrizeListBox/main.vue";i.default=a.exports}}]);