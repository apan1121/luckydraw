(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{100:function(t,e,i){"use strict";(function(t){var r=i(144),s=i.n(r),n=i(0),a=i(2);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e.a={components:{draggable:s()},filters:{},props:{},data:()=>({addNewFlag:!1,newPrize:{title:"",amount:1},inputPrizeList:[],editPrizeInfo:null}),computed:l({},Object(a.c)(["triggerOpenPrizeList","prizeList"])),watch:{triggerOpenPrizeList:{handler(){this.triggerOpenPrizeList?t(this.$refs.box).modal("show"):t(this.$refs.box).modal("hide")}},inputPrizeList:{deep:!0,handler(){var t=JSON.stringify(this.prizeList),e=JSON.stringify(this.inputPrizeList);t!==e&&this.syncPrizeList(JSON.parse(e))}}},created(){},mounted(){var e=this;t(this.$refs.box).bind("shown.bs.modal",()=>{e.inputPrizeList=JSON.parse(JSON.stringify(e.prizeList)),e.addNewFlag=!1,e.newPrize={title:"",amount:1},0===e.inputPrizeList.length&&(e.addNewFlag=!0),e.editPrizeInfo=null,n.g.mixpanel("PrizeListOpen_click"),n.g.gtag("event","PrizeListOpen_click")}),t(e.$refs.box).bind("hidden.bs.modal",()=>{n.g.mixpanel("PrizeListClose_click"),n.g.gtag("event","PrizeListClose_click")}),this.triggerOpenPrizeList?t(this.$refs.box).modal("show"):t(this.$refs.box).modal("hide")},updated(){},destroyed(){},methods:l(l(l({},Object(a.b)({})),Object(a.d)({syncPrizeList:"syncPrizeList"})),{},{openAddPrize(){this.newPrize={title:"",amount:1},this.addNewFlag=!0},saveNewPrizeAct(){if(this.newPrize.title)if(JSON.parse(JSON.stringify(this.inputPrizeList)).map(t=>t.title).includes(this.newPrize.title))n.e.warning({html:"已有相同的獎項"});else{var t=l({prize_sn:n.f.getRandomString(10),title:"獎勵",amount:1,del:!1},this.newPrize);this.inputPrizeList.push(t),this.addNewFlag=!1,n.g.mixpanel("PrizeListAdd_click",t),n.g.gtag("event","PrizeListAdd_click",t)}else this.addNewFlag=!1},openEditPrize(t){this.editPrizeInfo=JSON.parse(JSON.stringify(t))},saveEditPrizeAct(){if(this.editPrizeInfo){var t=JSON.parse(JSON.stringify(this.editPrizeInfo)),e=JSON.parse(JSON.stringify(this.inputPrizeList)),i=!1;if(e.forEach(e=>{e.prize_sn!==t.prize_sn&&e.title===t.title&&(i=!0)}),i)n.e.warning({html:"已有相同的獎項"});else{var r=!1;e.forEach((e,i)=>{e.prize_sn===t.prize_sn&&(r=i)}),!1===r?(e.del=!1,e.push(t)):e[r]=t,this.inputPrizeList=e,n.g.mixpanel("PrizeListEditSave_click",t),n.g.gtag("event","PrizeListEditSave_click",t),this.editPrizeInfo=null}}},delPrizeAct(t){var e=this;n.e.warning({html:"您確定要刪除此筆獎項嗎？對應的得獎資訊也都會消除唷"},()=>{var i=JSON.parse(JSON.stringify(e.inputPrizeList)),r=!1;i.forEach((e,i)=>{e.prize_sn===t.prize_sn&&(r=i)}),!1!==r&&(i[r].del=!0,n.g.mixpanel("PrizeListEditDel_click",i[r]),n.g.gtag("event","PrizeListEditDel_click",i[r])),e.inputPrizeList=i})},sortCallback(){var t=JSON.parse(JSON.stringify(this.inputPrizeList));n.g.mixpanel("PrizeListSort_trigger",t),n.g.gtag("event","PrizeListSort_trigger",t)}})}}).call(this,i(14))},356:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"modal",attrs:{id:"PrizeListBox",tabindex:"-1",role:"dialog"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("draggable",{attrs:{handle:".handler"},on:{change:t.sortCallback},model:{value:t.inputPrizeList,callback:function(e){t.inputPrizeList=e},expression:"inputPrizeList"}},[e("transition-group",[t._l(t.inputPrizeList,(function(i){return[!1===i.del?[t.editPrizeInfo&&t.editPrizeInfo.prize_sn===i.prize_sn?e("div",{key:i.prize_sn,staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend handler cursor-pointer"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("i",{staticClass:"fas fa-bars"})])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPrizeInfo.title,expression:"editPrizeInfo.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"編輯獎項名稱"},domProps:{value:t.editPrizeInfo.title},on:{input:function(e){e.target.composing||t.$set(t.editPrizeInfo,"title",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.editPrizeInfo.amount,expression:"editPrizeInfo.amount",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"數量",min:"1",step:"1"},domProps:{value:t.editPrizeInfo.amount},on:{input:function(e){e.target.composing||t.$set(t.editPrizeInfo,"amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text btn-success",staticStyle:{cursor:"pointer"},on:{click:t.saveEditPrizeAct}},[e("i",{staticClass:"far fa-save"})])])]):e("div",{key:i.prize_sn,staticClass:"input-group mb-3 prizeListGroup"},[e("div",{staticClass:"input-group-prepend handler cursor-pointer"},[e("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[e("i",{staticClass:"fas fa-bars"})])]),t._v(" "),e("div",{staticClass:"form-control"},[t._v("\n                                        "+t._s(i.title)+" ("+t._s(i.amount)+")\n                                    ")]),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openEditPrize(i)}}},[e("i",{staticClass:"far fa-edit"})])]),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delPrizeAct(i)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])]:t._e()]}))],2)],1),t._v(" "),t.prizeList.length>0?[e("hr")]:t._e(),t._v(" "),t.addNewFlag?[e("div",{staticClass:"input-group mb-3",attrs:{id:"AddPrizeGroup"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrize.title,expression:"newPrize.title"}],staticClass:"form-control",attrs:{name:"title",type:"text",placeholder:"新增的獎項名稱"},domProps:{value:t.newPrize.title},on:{input:function(e){e.target.composing||t.$set(t.newPrize,"title",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newPrize.amount,expression:"newPrize.amount",modifiers:{number:!0}}],staticClass:"form-control",attrs:{name:"amount",type:"number",placeholder:"數量",min:"1",step:"1"},domProps:{value:t.newPrize.amount},on:{input:function(e){e.target.composing||t.$set(t.newPrize,"amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:t.saveNewPrizeAct}},[e("i",{staticClass:"far fa-save"})])])])]:[e("button",{staticClass:"btn btn-info btn-block",attrs:{id:"AddPrize",type:"button"},on:{click:function(e){return t.openAddPrize(!0)}}},[t._v("\n                        新增獎項\n                    ")])]],2)])])])};r._withStripped=!0;var s=i(100).a,n=i(9),a=Object(n.a)(s,r,[function(){var t=this._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[t("i",{staticClass:"fas fa-award"}),this._v("\n                    獎項名單\n                ")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,"4ac1bd94",null);e.default=a.exports}}]);